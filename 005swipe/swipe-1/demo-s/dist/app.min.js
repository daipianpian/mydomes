/*! H5SPA 1.0.0 | 2016-03-21 00:04:45 */
!function(a, b) {
    var c = 0
      , d = -1
      , e = 1
      , f = null 
      , g = {
        init: function() {
            /(windows)/i.test(navigator.userAgent) && (location.href = "views/pc.html"),
            b.addEventListener("DOMContentLoaded", function() {
                f = b.querySelectorAll(".pagenumber div"),
                g.bindTouchEvent(),
                g.setPageNow()
            }
            .bind(g), !1)
        }(),
        transform: function(a) {
            this.style.webkitTransform = "translate3d(0,"+ a + "px,0)",
            c = a
        },
        setPageNow: function() {
            -1 != d && (f[d].className = ""),
            d = e - 1,
            f[d].className = "now"
        },
        bindTouchEvent: function() {
            var d, g, h = b.querySelector("#viewport"), i = a.innerWidth, j = -i * (f.length - 1), k = 0, l = 0, m = "bottom", n = !1, o = 0;

            // ontouchstart: 初始化变量, 记录手指所在的位置,记录当前时间
            /*手指放在屏幕上*/
            b.addEventListener("touchstart", function(a) {
                a.preventDefault();
                var b = a.touches[0];
                d = b.pageX,
                g = b.pageY,
                k = c, //本次滑动前的初始位置
                h.style.webkitTransition = "",//取消动画效果
                o = (new Date).getTime(),//记录手指按下的开始时间
                n = !1 //是否产生滑动
            }
            .bind(this), !1),
            b.addEventListener("touchmove", function(a) {
                a.preventDefault();
                var b = a.touches[0]
                  , c = b.pageX - d
                  , e = b.pageY - g;
                if (Math.abs(e) > Math.abs(c)) {
                    l = e;
                    var f = k + e;
                    0 >= f && f >= j && (this.transform.call(h, f),
                    n = !0),
                    m = e > 0 ? "top" : "bottom"
                }
            }
            .bind(this), !1),
            b.addEventListener("touchend", function(a) {
                a.preventDefault();
                var b = 0
                  , d = (new Date).getTime() - o;
                n && (h.style.webkitTransition = "0.3s ease -webkit-transform",
                300 > d ? (b = "bottom" == m ? e - (i + l) : e + i - l,
                b = b > 0 ? 0 : b,
                b = j > b ? j : b) : Math.abs(l) / i < .5 ? b = e - l : (b = "bottom" == m ? e - (i + l) : e + i - l,
                b = b > 0 ? 0 : b,
                b = j > b ? j : b),
                this.transform.call(h, b),
                e = Math.round(Math.abs(b) / i) + 1,
                setTimeout(function() {
                    this.setPageNow()
                }
                .bind(this), 100))
            }
            .bind(this), !1)
        }
    }
}(window, document);
